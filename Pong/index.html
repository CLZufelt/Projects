<html>
<head>
<script type="application/javascript">
//var 

var canvas = null;
var ctx = null;

function init() {
  canvas = document.getElementById('pong');
  ctx = canvas.getContext('2d');
  draw();
}

function draw() {
  clear_screen();
  draw_paddles();
  draw_puck();
  console.log("Drawing frame");
  setTimeout(draw, 5);
}

var why1 = 225;
var why2 = 225;
function draw_paddles() {
  ctx.fillStyle = "rgb(80,80,80)";
  why1 += paddle_speed_left;
  ctx.fillRect(0,why1,10,50);

  ctx.fillStyle = "rgb(80,80,80)";
  why2 += paddle_speed_right;
  ctx.fillRect(490,why2,10,50);
}

var paddle_speed_right = 0;
var paddle_speed_left = 0;
function paddle_control(event, direction) { 
  var keydown = String.fromCharCode(event.keyCode)
  console.log("You pressed: " + keydown)
  if (keydown === "A" && direction === "down") {
    paddle_speed_left = 1;
  }
  if (keydown === "A" && direction === "up") {
    paddle_speed_left = 0;
  }
  if (keydown === "S" && direction === "down") {
    paddle_speed_left = -1;
  }
  if (keydown === "S" && direction === "up") {
    paddle_speed_left = 0;
  }
  if (keydown === "K" && direction === "down") {
    paddle_speed_right = 1;
  }
  if (keydown === "K" && direction === "up") {
    paddle_speed_right = 0;
  }
  if (keydown === "L" && direction === "down") {
    paddle_speed_right = -1;
  }
  if (keydown === "L" && direction === "up") {
    paddle_speed_right = 0;
  }
}

var x = 250;
var y = 250;
var speedx = 1;
var speedy = 0.5;
function draw_puck() {
  ctx.fillStyle = "rgb(0,0,0)";
  ctx.fillRect(x,y,10,10);
  if (x === 0) {
    speedx = 1;
  }
  if (y === 0) {
    speedy = 0.5;
  }
  if (x === 490) {
    speedx = -1;
  }
  if (y === 490) {
    speedy = -0.5;
  }
  x += speedx;
  y += speedy;
}

function clear_screen() {
  ctx.fillStyle = "rgb(255, 255, 255)";
  ctx.fillRect(0,0,500,500);
}

</script>

</head>
<body onkeydown="paddle_control(event, 'down');" onkeyup="paddle_control(event,
'up');" onload="init();">

<canvas id="pong" style="border: 1px solid black;" width="500" height="500"></canvas>

</body>
</html>
